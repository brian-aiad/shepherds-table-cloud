@tailwind base;
@tailwind components;
@tailwind utilities;

/* ===== Root variables (used by helpers like the scrollbar) ===== */
:root {
  --app-bg: #f7f7fb;

  /* Scrollbar palette (tweak as you like) */
  --scroll-track: #f3f4f6;        /* light gray track */
  --scroll-thumb: #7f1d1d;        /* deep brand red thumb */
  --scroll-thumb-hover: #6b1515;  /* hover state */
}

/* ================== Base ================== */
@layer base {
  html,
  body,
  #root {
    height: 100%;
  }

  body {
    background: var(--app-bg);
    @apply text-gray-900 antialiased;
  }

  /* Use brand.200 for accessible focus rings */
  *:focus-visible {
    @apply outline-none ring-2 ring-brand-200;
  }

  /* Optional: nicer text selection */
  ::selection {
    @apply bg-brand-100 text-brand-900;
  }
}

/* ================== Components ================== */
@layer components {
  /* Card helper used in the dashboard */
  .card {
    @apply rounded-2xl ring-1 ring-brand-900/10 bg-white shadow-soft;
  }
}

/* ================== Utilities ================== */
@layer utilities {
  /* Subtle soft shadow to match your brand */
  .shadow-soft {
    box-shadow:
      0 1px 2px 0 rgb(0 0 0 / 0.04),
      0 8px 20px -8px rgb(0 0 0 / 0.08);
  }

  /* Hide native scrollbar (fallback helper) */
  .no-scrollbar::-webkit-scrollbar {
    display: none;
  }
  .no-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  /* Opt-in soft transitions instead of global * transitions */
  .transition-soft {
    transition-property: color, background-color, border-color, opacity, transform, box-shadow, filter;
    transition-duration: 150ms;
    transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  }
}

@keyframes bounce-slow {
  0%,
  100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(2px);
  }
}
.animate-bounce-slow {
  animation: bounce-slow 1.2s infinite;
}

/* ================== Pretty custom scrollbar ================== */
/* Apply by adding `pretty-scroll` to any scroll container */
.pretty-scroll {
  scrollbar-width: thin;                                     /* Firefox */
  scrollbar-color: var(--scroll-thumb) var(--scroll-track);  /* Firefox */
  scrollbar-gutter: stable both-edges;
}

/* Chromium/WebKit */
.pretty-scroll::-webkit-scrollbar {
  width: 10px;
  height: 10px;
}
.pretty-scroll::-webkit-scrollbar-track {
  background: var(--scroll-track);
  border-radius: 9999px;
}
.pretty-scroll::-webkit-scrollbar-thumb {
  background: var(--scroll-thumb);
  border-radius: 9999px;
  border: 2px solid var(--scroll-track); /* “pill” look */
}
.pretty-scroll:hover::-webkit-scrollbar-thumb {
  background: var(--scroll-thumb-hover);
}

/* Mobile: brand-colored scrollbar */
@media (max-width: 640px) {
  .pretty-scroll {
    -webkit-overflow-scrolling: touch;
    scrollbar-width: thin;
    scrollbar-color: var(--scroll-thumb) var(--scroll-track);
  }
  .pretty-scroll::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }
  .pretty-scroll::-webkit-scrollbar-track {
    background: var(--scroll-track);
    border-radius: 9999px;
  }
  .pretty-scroll::-webkit-scrollbar-thumb {
    background: var(--scroll-thumb);
    border-radius: 9999px;
    border: 1px solid var(--scroll-track);
  }
}

/* Custom scrollbar for client list and visit history */
.desktop-scrollbar {
  scrollbar-width: thin;
  scrollbar-color: var(--scroll-thumb) var(--scroll-track);
  -webkit-overflow-scrolling: touch;
}

.desktop-scrollbar::-webkit-scrollbar {
  width: 6px;
  height: 6px;
  background: transparent;
  border-radius: 8px;
}

.desktop-scrollbar::-webkit-scrollbar-track {
  background: var(--scroll-track);
  border-radius: 9999px;
}

.desktop-scrollbar::-webkit-scrollbar-thumb {
  background: var(--scroll-thumb);
  border-radius: 9999px;
  border: 1px solid var(--scroll-track);
}

/* Desktop: invisible unless hovered/touched */
@media (min-width: 768px) {
  .desktop-scrollbar {
    scrollbar-color: transparent transparent;
    transition: scrollbar-color 0.3s;
  }
  .desktop-scrollbar::-webkit-scrollbar {
    width: 8px;
    background: transparent;
    transition: background 0.3s;
  }
  .desktop-scrollbar::-webkit-scrollbar-thumb {
    background: transparent;
    opacity: 0;
    transition: opacity 0.3s, background 0.3s;
  }
  .desktop-scrollbar:hover,
  .desktop-scrollbar:active,
  .desktop-scrollbar:focus-within {
    scrollbar-color: var(--scroll-thumb-hover) var(--scroll-track);
  }
  .desktop-scrollbar:hover::-webkit-scrollbar,
  .desktop-scrollbar:active::-webkit-scrollbar,
  .desktop-scrollbar:focus-within::-webkit-scrollbar {
    background: var(--scroll-track);
  }
  .desktop-scrollbar:hover::-webkit-scrollbar-thumb,
  .desktop-scrollbar:active::-webkit-scrollbar-thumb,
  .desktop-scrollbar:focus-within::-webkit-scrollbar-thumb {
    opacity: 1;
    background: var(--scroll-thumb-hover);
  }
}

/* ================== Motion safety ================== */
/* Default: smooth scrolling when motion is allowed */
@media (prefers-reduced-motion: no-preference) {
  html {
    scroll-behavior: smooth;
  }
}

/* Respect users who prefer reduced motion */
@media (prefers-reduced-motion: reduce) {
  html {
    scroll-behavior: auto !important;
  }

  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}
